TODO
   * [ ]refactor struct file:

      * add namespace
      * rationalise & tidy enums
      * change to using 1 as first value
         * e.g. U1->U8
   * [ ]propagate refactor changes

   * [ ]refactor structure (remove in_file?)

   * [ ]look at optimisations 
